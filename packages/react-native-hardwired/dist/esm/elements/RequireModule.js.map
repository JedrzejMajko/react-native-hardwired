{"version":3,"file":"RequireModule.js","names":["React","useContext","useEffect","useState","getModuleReference","errorUtilsContextSwap","getContext","RequireModule","name","hash","children","args","context","moduleData","setModuleData","default","ModuleComponent","createElement"],"sources":["../../../src/elements/RequireModule.tsx"],"sourcesContent":["/*\n * Copyright (c) 2023 JÄ™drzej Majko (jdrzjm@gmail.com)\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nimport React, { useContext, useEffect, useState } from \"react\";\n\nimport { getModuleReference } from \"../utils/modules\";\nimport { HardwiredRequireType, ModuleType } from \"../types/index\";\nimport { errorUtilsContextSwap } from \"../utils/errorUtilsContextSwap\";\nimport { getContext } from \"../config\";\n\n/**\n * This is the component that is used to load a module using the RN require function or the one defined in configuration (runModuleStatement).\n * @param name Name of the module to run (optional, use this or hash)\n * @param hash Hash of the module to run (optional, use this or name)\n * @param children Children will be placed inside the loaded module\n * @param args Arguments to pass to the loaded module\n * @constructor\n */\nexport const RequireModule = ({\n  name,\n  hash,\n  children,\n  args,\n}: HardwiredRequireType): JSX.Element | null => {\n  const context = useContext(getContext());\n  const [moduleData, setModuleData] = useState<ModuleType | null>(null);\n\n  useEffect(() => {\n    if (name === null || hash === null) {\n      return;\n    }\n\n    if (hash !== null) {\n      errorUtilsContextSwap(() => {\n        setModuleData(getModuleReference(context, hash));\n      });\n    }\n  }, [hash, context, name]);\n\n  if (\n    moduleData &&\n    moduleData.default &&\n    typeof moduleData.default === \"function\"\n  ) {\n    const ModuleComponent = moduleData.default;\n    return <ModuleComponent {...args}>{children}</ModuleComponent>;\n  }\n\n  return null;\n};\n\nexport default { RequireModule };\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAE9D,SAASC,kBAAkB,QAAQ,kBAAkB;AAErD,SAASC,qBAAqB,QAAQ,gCAAgC;AACtE,SAASC,UAAU,QAAQ,WAAW;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,aAAa,GAAGA,CAAC;EAC5BC,IAAI;EACJC,IAAI;EACJC,QAAQ;EACRC;AACoB,CAAC,KAAyB;EAC9C,MAAMC,OAAO,GAAGX,UAAU,CAACK,UAAU,CAAC,CAAC,CAAC;EACxC,MAAM,CAACO,UAAU,EAAEC,aAAa,CAAC,GAAGX,QAAQ,CAAoB,IAAI,CAAC;EAErED,SAAS,CAAC,MAAM;IACd,IAAIM,IAAI,KAAK,IAAI,IAAIC,IAAI,KAAK,IAAI,EAAE;MAClC;IACF;IAEA,IAAIA,IAAI,KAAK,IAAI,EAAE;MACjBJ,qBAAqB,CAAC,MAAM;QAC1BS,aAAa,CAACV,kBAAkB,CAACQ,OAAO,EAAEH,IAAI,CAAC,CAAC;MAClD,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,CAACA,IAAI,EAAEG,OAAO,EAAEJ,IAAI,CAAC,CAAC;EAEzB,IACEK,UAAU,IACVA,UAAU,CAACE,OAAO,IAClB,OAAOF,UAAU,CAACE,OAAO,KAAK,UAAU,EACxC;IACA,MAAMC,eAAe,GAAGH,UAAU,CAACE,OAAO;IAC1C,oBAAOf,KAAA,CAAAiB,aAAA,CAACD,eAAe,EAAKL,IAAI,EAAGD,QAA0B,CAAC;EAChE;EAEA,OAAO,IAAI;AACb,CAAC;AAED,eAAe;EAAEH;AAAc,CAAC"}